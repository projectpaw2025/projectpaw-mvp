<!-- 중간 생략, 기존 코드 동일 -->

<style>
  /* ... 기존 스타일 유지 ... */
  .section-card .story{
    white-space:pre-line;
    font-size:1.1rem;
    line-height:1.8;
    color:#222
  }
  .section-card .story a{color:#2563eb;text-decoration:underline}
  .section-card .story strong{
    display:block;
    margin-top:12px;
    font-weight:800;
    color:#111;
  }
</style>

<script type="module">
  import { injectLayout } from './js/include.js';
  import { getProjectById } from './js/api.js';
  import { storage } from './js/firebase.js';
  import { ref, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-storage.js";

  injectLayout({ active:'project' });

  const $detail=document.getElementById('project-detail');
  const fmt=n=>Number(n||0).toLocaleString('ko-KR');

  // 링크 변환
  function linkify(text){
    return (text||'').replace(/(https?:\/\/[^\s]+)/g,'<a href="$1" target="_blank">$1</a>');
  }

  // 스토리 UX 강조
  function highlightDescription(text){
    let html=linkify(text||'');
    html=html.replace(/🐾([^🎯📸]+)/g,'<strong>🐾$1</strong>');
    html=html.replace(/🎯([^📸]+)/g,'<strong>🎯$1</strong>');
    html=html.replace(/📸(.+)/g,'<strong>📸$1</strong>');
    return html;
  }

  async function render(){
    const id=new URLSearchParams(location.search).get("id");
    if(!id){$detail.innerHTML='<div class="muted">잘못된 접근입니다.</div>';return;}
    try{
      const p=await getProjectById(id);
      if(!p){$detail.innerHTML='<div class="muted">존재하지 않는 프로젝트입니다.</div>';return;}

      // ... 기존 사진/진행률 코드 동일 ...

      $detail.innerHTML=`
        <!-- 사진 카드 ... 동일 -->

        <!-- 스토리 -->
        <section class="section-card">
          <h2>스토리</h2>
          <div class="story">${highlightDescription(p.description)}</div>
        </section>

        <!-- 버튼 / Beta 안내 ... 동일 -->
      `;

      // ... 기존 shareCopy, carousel 로직 동일 ...
    }catch(e){
      console.error(e);
      $detail.innerHTML='<div class="muted">프로젝트를 불러오지 못했습니다.</div>';
    }
  }
  render();
</script>
